library(MCMCglmm)
pwd
getWd()
getwd()
setwd('../results')
getwd()
d2c = read.table('brand_drugclass.txt',sep='\t',header=T,row.names=1)
d2c[1:3,1:3]
d2c[1:3,]
cxd = read.table('states_deviance_norm.txt',sep='\t',row.names=1,colClasses=list('state'='character'),header=T)

cxd[1:8,1:5]
cxd[,1:3]
cxd = read.table('states_deviance_norm.txt',sep='\t',row.names=1,colClasses=list('place'='character'),header=T)
cxd[1:3,1:3]
source(r_price_model.R)
source('r_price_model.R')
source('../code/r_price_model.R')
history()
countylist = rownames(cxd)

d2c = read.table('brand_drugclass.txt',sep='\t',header=T,row.names=1)
dim(d2c)
d2c[1:5,1:3]
cxd[1:5,1:5]
cxd = read.table('states_deviance_norm.txt',sep='\t',row.names=1,colClasses=list('place'='character'),header=T)
cxd[1:5,1:5]
x = cbind(d2c, t(cxd))
dim(x)
colnames(d2c)
colnames(d2c) - 'brandred'
colnames(d2c)[:10]
colnames(d2c)[1:10]
colnames(d2c)
randomclass = colnames(d2c)
randomclass[randomclass != "brandred"]
randomclass = colnames(d2c)
source('../code/r_price_model.R')
yy = getBrandPreference(cxd, d2c)
source('../code/r_price_model.R')
yy = getBrandPreference(cxd, d2c)
cxd[1:3,1:3]
paste("x", rownames(cxd)[1:5])
paste("x", rownames(cxd)[1:5],sep="")
source('../code/r_price_model.R')
yy = getBrandPreference(cxd, d2c)
yy = getBrandPreference(cxd, d2c)
source('../code/r_price_model.R')
yy = getBrandPreference(cxd, d2c)
dim(yy)
yy[1:3,1:5
]
write.table(yy, 'state_coef.txt',sep="\t")
write.table(yy, 'state_coef.txt',sep="\t",quote=F)
history()
history(100)
drugproj = read.table('drug_projection.txt',sep='\t',header=T,row.names=1)
drugproj[1:5,1:5]
d2c[1:5,1:5]
    drugproj$classf = as.factor(d2c['X0'])
    drugproj$brandred = d2c$brandred
drugproj$classf = as.factor(d2c$X0)
source('../code/r_price_model.R')
rr = projVbrand(drugproj)
source('../code/r_price_model.R')
source('../code/r_price_model.R')
rr = projVbrand(drugproj)
rr
source('../code/r_price_model.R')
source('../code/r_price_model.R')
rr = projVbrand(drugproj)
c(5,50,95)
rr = projVbrand(drugproj)
source('../code/r_price_model.R')
rr = projVbrand(drugproj)
rr
write.table(rr, 'component_price_effect_estimates.txt',sep='\t',quote=F)    
exists('book')
exists('component_price_effect_estimates.txt')
file.exists('component_price_effect_estimates.txt')
quit()
